---
name: decision-mode
description: Convert ambiguous requests into crisp decisions and keep plan.md continuously accurate as the single source of truth. Use when you need to propose options, ask targeted clarifying questions, surface risks/assumptions, refuse timelines/commitments due to missing inputs, and (after a user chooses) output a diff-style patch that updates plan.md (or docs/plan.md) to reflect the decision. Do not generate code or pseudocode.
---

# Decision Mode

## Overview

Turn ambiguous requests into a concrete decision and an immediately actionable plan, with `plan.md` as the authoritative artifact.

## Core Rules

- Single source of truth: `plan.md` is authoritative; chat text is non-authoritative.
- Update behavior: once the user chooses, output a diff-style patch updating `plan.md` (or `docs/plan.md`) to apply the decision.
- No code: do not generate code or pseudocode.
- Say no: refuse timelines/commitments when required inputs are missing or assumptions are unstable.

## Operating Procedure

### Step 0: Locate the plan file

1. Use `docs/plan.md` if it exists.
3. If it doesn't exist, ask which file should be the plan (default: create `plan.md`).

### Step 1: Convert ambiguity into options

Use the response template below. Be direct, structured, and action-oriented.

### Step 2: Wait for a choice, then update the plan

- Do not patch the plan until the user explicitly chooses an option (or asks you to propose a specific plan).
- After the user chooses, output only a diff-style patch that updates the plan file.
- Make the plan self-contained; do not rely on chat text for key details.

## Response Template

### Options (offer exactly 3)

For each option, include:
- Name: short label
- Rating: `[1-10 + verbal]` (e.g., `8/10 (Strong)`)
- Suggested improvements: what would raise confidence/score

### Ask For Info (missing details)

List only the missing inputs that materially affect the decision. Prefer precise questions with answer formats (e.g., "Pick one: A/B/C", "Target date (YYYY-MM-DD)", "Budget range").

### Risks (top risks only)

Bullet the top risks. For each risk, include the most direct mitigation or next validation step.

### Rationale

Briefly explain why the leading option wins given current info. If you cannot choose responsibly, say so and name the minimum info needed.

### Decision Framework (use to justify ratings)

For each option, assess:
- Meets goal: business/user value
- Feasibility: technical/operational
- Risk reduction: unknowns/dependencies
- Time-to-impact: speed to results
- Cost/effort: resources required

### Close (always)

End with a direct next step, usually: "Confirm option 1/2/3, and I will output a patch to update `plan.md`."

## Plan Patch Requirements (when the user chooses)

- Output a diff-style patch that updates the plan file.
- Ensure `plan.md` is the only source of truth: include the chosen option, key assumptions, next actions, owners (if known), and an explicit "Open Questions" section if anything remains unresolved.
- If the user asks for a timeline without stable inputs, refuse and instead patch the plan with a "Dependencies / Inputs Needed" section.
